import*as e from"../../../vendor/js/jquery-3.5.1.min.js";import t from"./chrome.min.mjs";import s from"./log.min.mjs";import i from"./common.min.mjs";import a from"./background.min.mjs";import o from"./laneros.min.mjs";export default class r{constructor(){}set_page(){let e=new i;t.get_storage(e.get_defaults(),this.set_options),e.set_ui_language(),e.parse_messages(),e.parse_html(),e.check_dark_mode(),o.set_validator()}set_options(e){try{let t=i.get_time(e.review_time),s=$("#single_notification"),a=$("#inbox_notification"),o=$("#alerts_notification"),c=$("#subscriptions_notification");e.show_user_info&&$("#section_user_info").attr("checked",!0),e.show_links&&$("#section_links").attr("checked",!0),e.show_inbox&&$("#section_inbox").attr("checked",!0),e.show_alerts&&$("#section_alerts").attr("checked",!0),e.show_subscriptions&&$("#section_subscriptions").attr("checked",!0),e.show_bookmarks&&$("#section_bookmarks").attr("checked",!0),e.dark_mode&&$("#dark_mode").attr("checked",!0),e.single_notification&&(s.attr("checked",!0),a.attr("disabled",!0).attr("checked",!1),o.attr("checked",!1).attr("disabled",!0),c.attr("checked",!1).attr("disabled",!0)),e.inbox_notification&&(a.attr("checked",!0),s.attr("checked",!1).attr("disabled",!0)),e.alerts_notification&&(o.attr("checked",!0),s.attr("checked",!1).attr("disabled",!0)),e.subscriptions_notification&&(c.attr("checked",!0),s.attr("checked",!1).attr("disabled",!0)),$("#hours").val(t.hours),$("#minutes").val(t.minutes),$("#seconds").val(t.seconds),$("#milliseconds").val(t.milliseconds),s.on("change",(function(){$(this).is(":checked")?(a.attr("disabled",!0).attr("checked",!1),o.attr("checked",!1).attr("disabled",!0),c.attr("checked",!1).attr("disabled",!0)):(a.attr("checked",!1).attr("disabled",!1),o.attr("checked",!1).attr("disabled",!1),c.attr("checked",!1).attr("disabled",!1))})),a.on("change",(function(){$(this).is(":checked")?s.attr("disabled",!0).attr("checked",!1):o.is(":checked")||c.is(":checked")||s.attr("disabled",!1).attr("checked",!1)})),o.on("change",(function(){$(this).is(":checked")?s.attr("disabled",!0).attr("checked",!1):a.is(":checked")||c.is(":checked")||s.attr("disabled",!1).attr("checked",!1)})),c.on("change",(function(){$(this).is(":checked")?s.attr("disabled",!0).attr("checked",!1):a.is(":checked")||o.is(":checked")||s.attr("disabled",!1).attr("checked",!1)})),$(".loading-box").fadeOut((function(){$(".options-page").fadeIn()})),$.validator&&$("#form_options").validate({submitHandler:r.save_options})}catch(e){new s("Options set_options").error(e)}}static save_options(){try{let e=parseInt($("#milliseconds").val())+1e3*parseInt($("#seconds").val())+60*parseInt($("#minutes").val())*1e3+60*parseInt($("#hours").val())*60*1e3,o={show_user_info:$("#section_user_info").is(":checked"),show_links:$("#section_links").is(":checked"),show_inbox:$("#section_inbox").is(":checked"),show_alerts:$("#section_alerts").is(":checked"),show_subscriptions:$("#section_subscriptions").is(":checked"),show_bookmarks:$("#section_bookmarks").is(":checked"),dark_mode:$("#dark_mode").is(":checked"),single_notification:$("#single_notification").is(":checked"),inbox_notification:$("#inbox_notification").is(":checked"),alerts_notification:$("#alerts_notification").is(":checked"),subscriptions_notification:$("#subscriptions_notification").is(":checked"),review_time:e>0?e:0},r=function(){$(".alert-response").removeClass("bg-green-100 border-green-500 text-green-500 bg-red-100 border-red-500 text-red-500").addClass("hidden"),$(".alert-processing").removeClass("hidden").hide().slideDown((function(){$(".alert-processing").addClass("hidden");try{i.set_alarm(e),new a,$(".alert-response .alert-title").html(t.get_message("label_saved_success")),$(".alert-response .alert-text").html(t.get_message("message_saved_success")),$(".alert-response").addClass("bg-green-100 border-green-500 text-green-500").removeClass("hidden").hide().slideDown()}catch(e){new s("Options save_options - callback").error(e),$(".alert-response .alert-title").html(t.get_message("label_saved_error")),$(".alert-response .alert-text").html(t.get_message("message_saved_error")),$(".alert-response").addClass("bg-red-100 border-red-500 text-red-500").removeClass("hidden").hide().slideDown()}}))};t.set_storage(o,r)}catch(e){new s("Options save_options").error(e)}return!1}}