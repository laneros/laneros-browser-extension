import*as e from"../../../vendor/js/jquery-3.5.1.min.js";import s from"./chrome.min.mjs";import o from"./log.min.mjs";import i from"./common.min.mjs";import t from"./background.min.mjs";import n from"./laneros.min.mjs";export default class r{constructor(){}set_page(){let e=new i;s.get_storage(e.get_defaults(),this.set_options),e.set_ui_language(),e.parse_messages(),e.parse_html(),e.check_dark_mode(),n.set_validator()}set_options(e){try{let s=i.get_time(e.review_time),o=$("#single_notification"),t=$("#inbox_notification"),n=$("#alerts_notification"),c=$("#subscriptions_notification");e.show_user_info&&$("#section_user_info").prop("checked",!0),e.show_links&&$("#section_links").prop("checked",!0),e.show_inbox&&$("#section_inbox").prop("checked",!0),e.show_alerts&&$("#section_alerts").prop("checked",!0),e.show_subscriptions&&$("#section_subscriptions").prop("checked",!0),e.show_bookmarks&&$("#section_bookmarks").prop("checked",!0),e.dark_mode&&$("#dark_mode").prop("checked",!0),e.single_notification&&(o.prop("checked",!0),t.prop("checked",!1),n.prop("checked",!1),c.prop("checked",!1)),e.inbox_notification&&(o.prop("checked",!1),t.prop("checked",!0)),e.alerts_notification&&(o.prop("checked",!1),n.prop("checked",!0)),e.subscriptions_notification&&(o.prop("checked",!1),c.prop("checked",!0)),$("#hours").val(s.hours),$("#minutes").val(s.minutes),$("#seconds").val(s.seconds),$("#milliseconds").val(s.milliseconds),o.on("change",(function(){$(this).is(":checked"),t.prop("checked",!1),n.prop("checked",!1),c.prop("checked",!1)})),t.on("change",(function(){$(this).is(":checked")&&o.prop("checked",!1)})),n.on("change",(function(){$(this).is(":checked")&&o.prop("checked",!1)})),c.on("change",(function(){$(this).is(":checked")&&o.prop("checked",!1)})),$(".loading-box").fadeOut((function(){$(".options-page").fadeIn()})),$.validator&&$("#form_options").validate({submitHandler:r.save_options})}catch(e){new o("Options set_options").error(e)}}static save_options(){try{let e=parseInt($("#milliseconds").val())+1e3*parseInt($("#seconds").val())+60*parseInt($("#minutes").val())*1e3+60*parseInt($("#hours").val())*60*1e3,n={show_user_info:$("#section_user_info").is(":checked"),show_links:$("#section_links").is(":checked"),show_inbox:$("#section_inbox").is(":checked"),show_alerts:$("#section_alerts").is(":checked"),show_subscriptions:$("#section_subscriptions").is(":checked"),show_bookmarks:$("#section_bookmarks").is(":checked"),dark_mode:$("#dark_mode").is(":checked"),single_notification:$("#single_notification").is(":checked"),inbox_notification:$("#inbox_notification").is(":checked"),alerts_notification:$("#alerts_notification").is(":checked"),subscriptions_notification:$("#subscriptions_notification").is(":checked"),review_time:e>0?e:0},r=function(){$(".alert-response").removeClass("bg-green-100 border-green-500 text-green-500 bg-red-100 border-red-500 text-red-500").addClass("hidden"),$(".alert-processing").removeClass("hidden").hide().slideDown((function(){$(".alert-processing").addClass("hidden");try{i.set_alarm(e,i.check_data),new t,$(".alert-response .alert-title").html(s.get_message("label_saved_success")),$(".alert-response .alert-text").html(s.get_message("message_saved_success")),$(".alert-response").addClass("bg-green-100 border-green-500 text-green-500").removeClass("hidden").hide().slideDown((function(){setTimeout((function(){$(".alert-response").fadeOut("slow")}),3e3)}))}catch(e){new o("Options save_options - callback").error(e),$(".alert-response .alert-title").html(s.get_message("label_saved_error")),$(".alert-response .alert-text").html(s.get_message("message_saved_error")),$(".alert-response").addClass("bg-red-100 border-red-500 text-red-500").removeClass("hidden").hide().slideDown((function(){setTimeout((function(){$(".alert-response").fadeOut("slow")}),3e3)}))}}))};s.set_storage(n,r)}catch(e){new o("Options save_options").error(e)}return!1}}